{"ast":null,"code":"import axios from 'axios';\nexport default {\n  data() {\n    return {\n      currentRoute: window.location.pathname,\n      responseData: ''\n    };\n  },\n\n  mounted() {\n    this.success();\n  },\n\n  methods: {\n    getUrl: function () {\n      let params = new URLSearchParams(window.location.search);\n      console.log(params.get(\"paymentKey\"));\n      console.log(params.get(\"orderId\"));\n      console.log(params.get(\"amount\"));\n    },\n    success: function () {\n      let params = new URLSearchParams(window.location.search);\n      console.log(params.get(\"paymentKey\"));\n      console.log(params.get(\"orderId\"));\n      console.log(params.get(\"amount\"));\n      const url = 'https://api.tosspayments.com/v1/payments/' + params.get(\"paymentKey\");\n      const token = \"dGVzdF9za19ZUEJhbDJ2eGo4MWV4NDdFNURHODVSUWdPQU5EOg==\";\n      let userData = {\n        amount: params.get(\"amount\"),\n        orderId: params.get(\"orderId\")\n      };\n      const instance = axios.create({\n        baseURL: url,\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: 'Basic ' + token\n        }\n      });\n      instance.post(url, userData).then(res => {\n        this.responseData = res;\n        console.log(\"[res] Item Insert\", res);\n      }).catch(err => {\n        this.responseData = err.response.data;\n        console.error(\"[error] Item Insert Error!\", err.response.data);\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"AAWA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,eAAe;EACXC,IAAI,GAAE;IACF,OAAM;MACFC,YAAY,EAAEC,MAAM,CAACC,QAAP,CAAgBC,QAD5B;MAEFC,YAAY,EAAE;IAFZ,CAAN;EAKH,CAPU;;EAQXC,OAAO,GAAG;IACN,KAAKC,OAAL;EACH,CAVU;;EAWXC,OAAO,EAAE;IACLC,MAAM,EAAC,YAAU;MACb,IAAIC,MAAK,GAAI,IAAIC,eAAJ,CAAoBT,MAAM,CAACC,QAAP,CAAgBS,MAApC,CAAb;MACAC,OAAO,CAACC,GAAR,CAAYJ,MAAM,CAACK,GAAP,CAAW,YAAX,CAAZ;MACAF,OAAO,CAACC,GAAR,CAAYJ,MAAM,CAACK,GAAP,CAAW,SAAX,CAAZ;MACAF,OAAO,CAACC,GAAR,CAAYJ,MAAM,CAACK,GAAP,CAAW,QAAX,CAAZ;IACH,CANI;IAQLR,OAAO,EAAC,YAAU;MACd,IAAIG,MAAK,GAAI,IAAIC,eAAJ,CAAoBT,MAAM,CAACC,QAAP,CAAgBS,MAApC,CAAb;MACAC,OAAO,CAACC,GAAR,CAAYJ,MAAM,CAACK,GAAP,CAAW,YAAX,CAAZ;MACAF,OAAO,CAACC,GAAR,CAAYJ,MAAM,CAACK,GAAP,CAAW,SAAX,CAAZ;MACAF,OAAO,CAACC,GAAR,CAAYJ,MAAM,CAACK,GAAP,CAAW,QAAX,CAAZ;MAEA,MAAMC,GAAE,GAAI,8CAA4CN,MAAM,CAACK,GAAP,CAAW,YAAX,CAAxD;MACA,MAAME,KAAI,GAAI,sDAAd;MAEA,IAAIC,QAAO,GAAI;QACXC,MAAM,EAAET,MAAM,CAACK,GAAP,CAAW,QAAX,CADG;QAEXK,OAAO,EAAEV,MAAM,CAACK,GAAP,CAAW,SAAX;MAFE,CAAf;MAKA,MAAMM,QAAO,GAAItB,KAAK,CAACuB,MAAN,CAAa;QAC1BC,OAAO,EAAEP,GADiB;QAE1BQ,OAAO,EAAE;UACL,gBAAgB,kBADX;UAELC,aAAa,EAAE,WAAWR;QAFrB;MAFiB,CAAb,CAAjB;MAQAI,QAAQ,CAACK,IAAT,CAAcV,GAAd,EAAmBE,QAAnB,EACCS,IADD,CACOC,GAAE,IAAK;QACV,KAAKvB,YAAL,GAAoBuB,GAApB;QACAf,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCc,GAAjC;MACH,CAJD,EAKCC,KALD,CAKQC,GAAE,IAAK;QACX,KAAKzB,YAAL,GAAoByB,GAAG,CAACC,QAAJ,CAAa/B,IAAjC;QACAa,OAAO,CAACmB,KAAR,CAAc,4BAAd,EAA4CF,GAAG,CAACC,QAAJ,CAAa/B,IAAzD;MACH,CARD;IASJ;EAvCK;AAXE,CAAf","names":["axios","data","currentRoute","window","location","pathname","responseData","mounted","success","methods","getUrl","params","URLSearchParams","search","console","log","get","url","token","userData","amount","orderId","instance","create","baseURL","headers","Authorization","post","then","res","catch","err","response","error"],"sourceRoot":"","sources":["/Users/scbock01/Desktop/test/payment-samples/payment-window/vue/src/views/successPage.vue"],"sourcesContent":["\n<template>\n  <h1>Success Page</h1>\n  <br/>\n  <p> url: {{currentRoute}} </p>\n  <p> params:  {{ this.$route.params.orderId }}</p>\n  <p> response:  {{ responseData }}</p>\n\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n    data(){\n        return{\n            currentRoute: window.location.pathname,\n            responseData: ''\n        }\n\n    }, \n    mounted() {\n        this.success();\n    },    \n    methods: {\n        getUrl:function(){\n            let params = new URLSearchParams(window.location.search);\n            console.log(params.get(\"paymentKey\"));\n            console.log(params.get(\"orderId\"));\n            console.log(params.get(\"amount\"));\n        },\n    \n        success:function(){\n            let params = new URLSearchParams(window.location.search);\n            console.log(params.get(\"paymentKey\"));\n            console.log(params.get(\"orderId\"));\n            console.log(params.get(\"amount\"));\n\n            const url = 'https://api.tosspayments.com/v1/payments/'+params.get(\"paymentKey\");\n            const token = \"dGVzdF9za19ZUEJhbDJ2eGo4MWV4NDdFNURHODVSUWdPQU5EOg==\";\n\n            let userData = {\n                amount: params.get(\"amount\"),\n                orderId: params.get(\"orderId\")\n            }\n\n            const instance = axios.create({\n                baseURL: url,\n                headers: {\n                    'Content-Type': 'application/json',\n                    Authorization: 'Basic ' + token, \n                }\n            })\n\n            instance.post(url, userData)\n            .then( res => {                \n                this.responseData = res\n                console.log(\"[res] Item Insert\", res);\n            })\n            .catch( err => {\n                this.responseData = err.response.data\n                console.error(\"[error] Item Insert Error!\", err.response.data);\n            })\n        }\n    }\n}\n</script>"]},"metadata":{},"sourceType":"module"}